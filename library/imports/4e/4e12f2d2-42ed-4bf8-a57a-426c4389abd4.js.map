{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var Const     = require(\"Const\");\r\nvar ArrayUtils= require(\"ArrayUtils\");\r\nvar GameData  = require(\"GameData\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        letterPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        bulletPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 地面节点，用于确定星星生成的高度\r\n        ground: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // player 节点，用于获取主角弹跳的高度，和控制主角行动开关\r\n        player: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // score label 的引用\r\n        scoreDisplay: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 时间 label 的引用\r\n        timeLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        levelLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 得分音效资源\r\n        scoreAudio: {\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n                // 时间 label 的引用\r\n        gameOverNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        againButton: {\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n        backButton: {\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n        this.time = 60;\r\n        // 初始化计时器\r\n        this.timer = 2.0;\r\n        // 初始化计分\r\n        this.score = 0;\r\n        //\r\n        this.keyCode = 0;\r\n        //增加按钮事件\r\n        this.addKeyListener();\r\n        this.letterList = [];\r\n        this.isGameOver = false;\r\n        this.level = GameData.level;\r\n        this.interval = Const.intervals[this.level];\r\n        this.levelLabel.string = 'Level:'+this.level\r\n    },\r\n    randomKeyCode: function()\r\n    {\r\n        var index =  Math.floor(cc.rand())%Const.keyCodes.length;\r\n        //console.log(\"random:\"+ index)  ;\r\n        return Const.keyCodes[index];\r\n    },\r\n\r\n    getScore: function (level) {\r\n        switch(level)\r\n        {\r\n            case 1:\r\n                return 1;\r\n            case 2:\r\n                return 2;\r\n            case 3:\r\n                return 3;\r\n            case 4:\r\n                return 4;    \r\n        }\r\n        return 1;\r\n    },\r\n\r\n\r\n    addScore: function (level) {\r\n        this.score += this.getScore(level);\r\n        this.scoreDisplay.string = 'Score: ' + this.score.toString();\r\n        cc.audioEngine.playEffect(this.scoreAudio, false);\r\n    },\r\n\r\n    gameOver: function () {\r\n\r\n        this.gameOverNode.active = true;\r\n        this.againButton.node.on(cc.Node.EventType.TOUCH_START, function(event){\r\n            cc.director.loadScene('game');\r\n        });\r\n        this.backButton.node.on(cc.Node.EventType.TOUCH_START, function(event){\r\n            cc.director.loadScene('menu');\r\n        });\r\n    },\r\n    \r\n    createLetter: function() {  //生成一个字母\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        var letter = cc.instantiate(this.letterPrefab);\r\n        //将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(letter);\r\n        letter.setPosition(this.randomLetterPosition());\r\n        var letComponent = letter.getComponent('Letter');\r\n        var level = this.randomLetterLevel();\r\n        letComponent.init(this.randomKeyCode(),level,this);\r\n        this.letterList.push(letComponent);\r\n    },\r\n    randomLetterLevel:function()\r\n    {   var arrays =[ [1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,3],\r\n                     [2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,1],\r\n                     [3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,1]];\r\n        var array = arrays[this.level -1];\r\n  \r\n        return array[Math.floor(cc.rand())%array.length];\r\n    }\r\n    ,\r\n    randomLetterPosition: function () {\r\n        var randX = cc.randomMinus1To1() * (this.node.width/2 - 10);\r\n        return cc.p(randX, this.node.height/2);\r\n    },\r\n    createBullet: function()\r\n    {\r\n        var bullet = cc.instantiate(this.bulletPrefab);\r\n        this.node.addChild(bullet);\r\n        bullet.setPosition(cc.p(0,-this.node.height/2));\r\n        var bulletComponent = bullet.getComponent(\"Bullet\");\r\n        return bulletComponent;\r\n    }\r\n    ,\r\n    addKeyListener: function () {\r\n         var self = this;\r\n        cc.eventManager.addListener({\r\n            event: cc.EventListener.KEYBOARD,\r\n            onKeyPressed: function(keyCode, event) {\r\n                self.keyCode = keyCode;\r\n                //console.log(\"do keyCode====:\"+keyCode);\r\n            },\r\n            onKeyReleased: function(keyCode, event) {\r\n                self.keyCode = 0;\r\n            }\r\n        }, this.node);\r\n    },\r\n    countdown:function(dt)\r\n    {\r\n        if( this.time > 0){ \r\n            this.time -= dt; \r\n            if (this.time <= 0.0)\r\n            {\r\n                this.time = 0;\r\n            }\r\n            var curTime = Math.floor(this.time);\r\n            if (this.timeLabel.time !== curTime)\r\n            {\r\n                this.timeLabel.string = 'Time:' + curTime +'s';\r\n                this.timeLabel.time = curTime ;\r\n            }\r\n        }\r\n     },\r\n         // called every frame\r\n    update: function (dt) {\r\n        if (this.isGameOver !== true)\r\n        {\r\n            this.gameRunning(dt);\r\n        }\r\n    },\r\n    gameRunning: function (dt) {\r\n        this.countdown(dt);\r\n        if (this.time <= 0)\r\n        {\r\n            this.isGameOver = true;\r\n            this.gameOver();\r\n            console.log(\"gameover\");\r\n            return;\r\n        }\r\n        //字母生成 2秒钟生成一次\r\n        this.timer+= dt;\r\n        if (this.timer > this.interval) \r\n        {\r\n            this.createLetter();\r\n            this.timer = 0;\r\n        }\r\n        //检查\r\n        if (this.keyCode !== 0)\r\n        { \r\n            for (var index in this.letterList)\r\n            { \r\n                var letter = this.letterList[index];\r\n                //console.log(\"letter=\"+letter);\r\n                if (letter.isPick(this.keyCode))\r\n                {\r\n                    var bullet = this.createBullet();\r\n                    letter.setLock(bullet);\r\n                    break;\r\n                }\r\n            }\r\n            \r\n        }\r\n        this.keyCode = 0;\r\n    },\r\n    removeLetter:function(letter)\r\n    {\r\n        ArrayUtils.remove(this.letterList,letter);\r\n    }\r\n    \r\n});\r\n"
  ]
}