require=function e(t,c,i){function s(o,r){if(!c[o]){if(!t[o]){var a="function"==typeof require&&require;if(!r&&a)return a(o,!0);if(n)return n(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=c[o]={exports:{}};t[o][0].call(h.exports,function(e){var c=t[o][1][e];return s(c?c:e)},h,h.exports,e,t,c,i)}return c[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({ArrayUtils:[function(e,t,c){"use strict";cc._RFpush(t,"dca0fj7sSNILLOm8yG3G6El","ArrayUtils"),t.exports={remove:function(e,t){for(var c=0;c<e.length;c++)e[c]===t&&e.splice(c,1)}},cc._RFpop()},{}],Bullet:[function(e,t,c){"use strict";cc._RFpush(t,"4644f0m2WtABYRy+pn6dOaG","Bullet"),cc.Class({"extends":cc.Component,properties:{speed:10},onLoad:function(){this.speed=30},destory:function(){this.node.destroy()},follow:function(e){var t=this.node.getPosition(),c=e.getPosition(),i=cc.pDistance(c,t);if(!(i>this.speed/2))return!0;var s=Math.abs(i/this.speed),n=c.x-t.x,o=c.y-t.y,r=n/s,a=o/s;return this.node.x=this.node.x+r,this.node.y=this.node.y+a,!1}}),cc._RFpop()},{}],Const:[function(e,t,c){"use strict";cc._RFpush(t,"8e444QNgelAmpjsxhXbKSHG","Const"),t.exports={letSpeeds:new Array(1,2,3,4,5),keyCodes:new Array(cc.KEY.a,cc.KEY.b,cc.KEY.c,cc.KEY.d,cc.KEY.e,cc.KEY.f,cc.KEY.g,cc.KEY.h,cc.KEY.i,cc.KEY.j,cc.KEY.k,cc.KEY.l,cc.KEY.m,cc.KEY.n,cc.KEY.o,cc.KEY.p,cc.KEY.q,cc.KEY.r,cc.KEY.s,cc.KEY.t,cc.KEY.u,cc.KEY.v,cc.KEY.w,cc.KEY.x,cc.KEY.y,cc.KEY.z),keyMap:{}},t.exports.keyMap[cc.KEY.a]="A",t.exports.keyMap[cc.KEY.b]="B",t.exports.keyMap[cc.KEY.c]="C",t.exports.keyMap[cc.KEY.d]="D",t.exports.keyMap[cc.KEY.e]="E",t.exports.keyMap[cc.KEY.f]="F",t.exports.keyMap[cc.KEY.g]="G",t.exports.keyMap[cc.KEY.h]="H",t.exports.keyMap[cc.KEY.i]="I",t.exports.keyMap[cc.KEY.j]="J",t.exports.keyMap[cc.KEY.k]="K",t.exports.keyMap[cc.KEY.l]="L",t.exports.keyMap[cc.KEY.m]="M",t.exports.keyMap[cc.KEY.n]="N",t.exports.keyMap[cc.KEY.o]="O",t.exports.keyMap[cc.KEY.p]="P",t.exports.keyMap[cc.KEY.q]="Q",t.exports.keyMap[cc.KEY.r]="R",t.exports.keyMap[cc.KEY.s]="S",t.exports.keyMap[cc.KEY.t]="T",t.exports.keyMap[cc.KEY.u]="U",t.exports.keyMap[cc.KEY.v]="V",t.exports.keyMap[cc.KEY.w]="W",t.exports.keyMap[cc.KEY.x]="X",t.exports.keyMap[cc.KEY.y]="Y",t.exports.keyMap[cc.KEY.z]="Z",cc._RFpop()},{}],Game:[function(e,t,c){"use strict";cc._RFpush(t,"4e12fLSQu1L+KV6QmxDiavU","Game");var i=e("Const"),s=e("ArrayUtils");cc.Class({"extends":cc.Component,properties:{letterPrefab:{"default":null,type:cc.Prefab},bulletPrefab:{"default":null,type:cc.Prefab},ground:{"default":null,type:cc.Node},player:{"default":null,type:cc.Node},scoreDisplay:{"default":null,type:cc.Label},timeLabel:{"default":null,type:cc.Label},scoreAudio:{"default":null,url:cc.AudioClip},gameOverNode:{"default":null,type:cc.Node},startButton:{"default":null,type:cc.Button}},onLoad:function(){this.time=30,this.timer=2,this.score=0,this.keyCode=0,this.addKeyListener(),this.letterList=[],this.isGameOver=!1},randomKeyCode:function(){var e=Math.floor(cc.rand())%i.keyCodes.length;return i.keyCodes[e]},getScore:function(e){switch(e){case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4}return 1},addScore:function(e){this.score+=this.getScore(e),this.scoreDisplay.string="Score: "+this.score.toString(),cc.audioEngine.playEffect(this.scoreAudio,!1)},gameOver:function(){this.gameOverNode.active=!0,this.startButton.node.on(cc.Node.EventType.TOUCH_START,function(e){console.log("按钮按下"),cc.director.loadScene("game")})},createLetter:function(){var e=cc.instantiate(this.letterPrefab);this.node.addChild(e),e.setPosition(this.randomLetterPosition());var t=e.getComponent("Letter");t.init(this.randomKeyCode(),1,this),this.letterList.push(t)},randomLetterPosition:function(){var e=cc.randomMinus1To1()*(this.node.width/2);return cc.p(e,this.node.height/2)},createBullet:function(){var e=cc.instantiate(this.bulletPrefab);this.node.addChild(e),e.setPosition(cc.p(0,-this.node.height/2));var t=e.getComponent("Bullet");return t},addKeyListener:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,c){e.keyCode=t},onKeyReleased:function(t,c){e.keyCode=0}},this.node)},countdown:function(e){if(this.time>0){this.time-=e,this.time<=0&&(this.time=0);var t=Math.floor(this.time);this.timeLabel.time!==t&&(this.timeLabel.string="time:"+t+"s",this.timeLabel.time=t)}},update:function(e){this.isGameOver!==!0&&this.gameRunning(e)},gameRunning:function(e){if(this.countdown(e),this.time<=0)return this.isGameOver=!0,this.gameOver(),void console.log("gameover");if(this.timer+=e,this.timer>2&&(this.createLetter(),this.timer=0),0!==this.keyCode)for(var t in this.letterList){var c=this.letterList[t];if(c.isPick(this.keyCode)){var i=this.createBullet();c.setLock(i);break}}this.keyCode=0},removeLetter:function(e){s.remove(this.letterList,e)}}),cc._RFpop()},{ArrayUtils:"ArrayUtils",Const:"Const"}],Letter:[function(e,t,c){"use strict";cc._RFpush(t,"807f83fi4lA4b1g4V7huAQE","Letter");var i=e("Const"),s={NORMAR:1,DANGER:2};cc.Class({"extends":cc.Component,properties:{letterLabel:{"default":null,type:cc.Label}},onLoad:function(){this.letKeyCode=-1,this.level=1,this.speed=1,this.enable=!0,this.bullet=null},getLetter:function(e){return i.keyMap[e]},init:function(e,t,c){this.game=c,this.letKeyCode=e,this.level=t,this.enable=!0,this.letterLabel.string=this.getLetter(this.letKeyCode),this.speed=i.letSpeeds[this.level-1],this.state=s.NORMAR},destroyPick:function(){this.game.addScore(this.level),this.node.destroy()},destroyLose:function(){this.node.destroy()},doPickAction:function(){var e=cc.scaleTo(.05,2),t=cc.callFunc(this.destroyPick,this);this.node.runAction(cc.sequence(e,t)),this.enable=!1,this.game.removeLetter(this),this.destoryBullet()},doLoseAction:function(){var e=cc.scaleTo(.05,.1),t=cc.callFunc(this.destroyLose,this);this.node.runAction(cc.sequence(e,t)),this.enable=!1,this.game.removeLetter(this),this.destoryBullet()},isPick:function(e){return this.letKeyCode==e},setLock:function(e){this.bullet=e},destoryBullet:function(){null!==this.bullet&&(this.bullet.destory(),this.bullet=null)},setState:function(e){if(this.state!==e){switch(e){case s.NORMAR:break;case s.DANGER:this.node.runAction(cc.blink(2,10))}this.state=e}},checkDangerous:function(){this.state===s.NORMAR&&this.node.y<-200&&this.setState(s.DANGER)},update:function(e){if(this.enable===!0){if(this.node.y=this.node.y-this.speed,this.node.y<-320)return void this.doLoseAction();this.checkDangerous(),null!==this.bullet&&this.bullet.follow(this.node)&&this.doPickAction()}}}),cc._RFpop()},{Const:"Const"}],Player:[function(e,t,c){"use strict";cc._RFpush(t,"6c688v72QdOKamCGCT+xaAd","Player"),cc.Class({"extends":cc.Component,properties:{jumpHeight:0,jumpDuration:0,maxMoveSpeed:0,accel:0,jumpAudio:{"default":null,url:cc.AudioClip}},setJumpAction:function(){var e=cc.moveBy(this.jumpDuration,cc.p(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),t=cc.moveBy(this.jumpDuration,cc.p(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),c=cc.callFunc(this.playJumpSound,this);return cc.repeatForever(cc.sequence(e,t,c))},playJumpSound:function(){cc.audioEngine.playEffect(this.jumpAudio,!1)},setInputControl:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,c){switch(t){case cc.KEY.a:e.accLeft=!0,e.accRight=!1;break;case cc.KEY.d:e.accLeft=!1,e.accRight=!0}},onKeyReleased:function(t,c){switch(t){case cc.KEY.a:e.accLeft=!1;break;case cc.KEY.d:e.accRight=!1}}},e.node)},onLoad:function(){this.jumpAction=this.setJumpAction(),this.node.runAction(this.jumpAction),this.accLeft=!1,this.accRight=!1,this.xSpeed=0,this.setInputControl()},update:function(e){this.accLeft?this.xSpeed-=this.accel*e:this.accRight&&(this.xSpeed+=this.accel*e),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*e,this.node.x<-480?(this.node.x=480,this.xSpeed=0):this.node.x>480&&(this.node.x=-480,this.xSpeed=0)}}),cc._RFpop()},{}]},{},["Bullet","Game","Player","Letter","Const","ArrayUtils"]);